#!/bin/bash

###########################################################################################################
###############################   PLEASE READ THE SCRIPT BEFORE USING  ####################################
###############################    USE THIS SCRIPT AT YOUR OWN RISK  ######################################
###########################################################################################################
# Author            : AKM                                                                                 #
# Disribution       : Arch Linux                                                                          #
###########################################################################################################

## Simple but not accurate

#pacman -Qs $1 &> /dev/null

#if [ $? -eq 0 ]; then
#    echo "Package $1 is installed!"
#else
#    echo "Package $1 is NOT installed!"
#fi

## More Accurate

package="$1";

if pacman -Qi $package &> /dev/null ; then

    echo "============================================================================"
    echo "${package} is ALREADY installed. See pactree below :"
    echo "============================================================================"

    pactree -d 1 "$package"
    exit 1;
else
    
    echo "============================================================================"
    echo "${package} is NOT installed. Do you want to install? (y/n)"
    echo "============================================================================"

    read -r CHOICE
    case $CHOICE in

    y )
    echo "============================================================================"
    echo "Installing ${package}..."
    echo "============================================================================"
    paru -S "${package}"

    ;;

    n )
    echo "============================================================================"
    echo "You chose not to install ${package}."
    echo "============================================================================"
    ;;

    * )
    echo "============================================================================"
    echo "Type y/n only."
    echo "============================================================================"

    ;;
    esac
fi
